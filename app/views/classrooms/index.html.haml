
%h2 Listing classrooms
.row-fluid
  #rooms_search
    #rooms_search_form.span3
      #rooms_search_results_count
        = @search.count
        rooms met your criteria
      #rooms_search_instructions
        Narrow your search by selecting your requirements below
      #rooms_search_instructions_extended
        Use the fields and checkboxes below to specify attributes such as minimum seating capacity, type of writing surface, and installed equipment. Then, press the Search button at the bottom to list rooms that meet your requirements.

      = simple_form_for @search, :remote => false, :html => {:class => "form-inline"} do |f|
        -# =>
          = f.collection_select :location_id_equals, Location.where(:locatable_type => "Building").order("name ASC"), :id, :name, :prompt => "Limit By Scheduler"
          %br
          %br
          = f.collection_select :location_id_equals, Location.where(:locatable_type => "Building").order("name ASC"), :id, :name, :prompt => "Limit By Support Contact"
          %br
          %br
        = f.collection_select :location_id_equals, Location.where(:locatable_type => "Building").order("name ASC"), :id, :name, :prompt => "Limit By Building"
        %br
        
        %br
        -#= f.input :room_number, :wrapper => :prepend, :label => false do
          -#= content_tag :span, "Room #", :class => "add-on"
          -#= f.input_field :facility_code_heprod_contains, :placeholder => "USB2230", :input_html => { :tabindex => '1', :class => 'input-min' }
        = f.label :room_number
        = f.text_field :facility_code_heprod_contains, :size => 7, :placeholder => "USB2230", :style => "height: 1em; width: 62px;"
        %br

        = f.label :podium_computer
        = f.check_box :podium_computer_any_or_podium_computer_mac_or_podium_computer_windows_is_true

        %br
        = f.label :computer_classroom
        = f.check_box :computer_classroom_any_or_computer_classroom_mac_or_computer_classroom_windows_is_true
        %br
        = f.label "Video Projection"
        = f.check_box :projection_16mm_film_or_projection_35mm_file_or_projection_digital_data_video_or_projection_traditional_slide_is_true

        %br
        = f.label "DVD Player"
        = f.check_box :dvd_player_regular_or_dvd_player_blueray_is_true
        %br
        = f.label :sound_amplification
        = f.check_box :sound_amplification_is_true
        %br
        = f.label :document_camera_
        = f.check_box :document_camera_is_true
        %br
        = f.label :lecture_capture
        = f.check_box :lecture_capture_is_true
        %br
        = f.label :video_conferencing
        = f.check_box :video_conferencing_is_true
        %br
        %br

        %label{:for => "amount"} Student Capacity
        %br

        = f.text_field :student_capacity_greater_than_or_equal_to, :size => 3, :placeholder => '1', :style => "width: 25px; height: 0.8em; float: left;", :id => "my_min"
        #slider-range

        = f.text_field :student_capacity_less_than_or_equal_to, :size => 3, :placeholder => '250', :style => "width: 25px; height: 0.8em;",:id => "my_max"


        %br
        %br
        = f.label "results per page"
        = select_tag :per_page, options_for_select([14,25,50,100], @per_page.to_i), :style => "width: 60px;"
        %br
        %br

        = f.submit 'Create Search', :class => 'btn btn-mini'
        %br
        %br
        <input type="button" class="btn btn-mini" value="Reset!" ONCLICK="window.location.href='../classrooms'">

        - if can? :update, @classroom
          %br
          %br
          %a{"data-toggle" => "modal", :href => "#myModal", :role => "button", :style => "color:#800000; font-weight: bold;"} Admin
          #myModal.modal.hide.fade
            .modal-header
              %button.close{"aria-hidden" => "true", "data-dismiss" => "modal", :type => "button"} Ã—
              %h3 Administrative Functions
            .modal-body
              = link_to 'New Classroom', new_classroom_path, :class => 'btn btn-mini'
              %br
              %hr
              Import Attributes
              = form_tag import_classrooms_path, multipart: true do
                =file_field_tag :file
                %br
                = submit_tag "Import"

            .modal-footer
              %a.btn.btn-mini{"data-dismiss" => "modal", :href => "#"} Close



    #rooms_results
      = render :partial => 'classroom_results'
- if can? :update, @classroom
  Import Attributes
  = form_tag import_classrooms_path, multipart: true do
    =file_field_tag :file
    %br
    = submit_tag "Import"



:javascript
  $('#myModal').modal({show: false})


-#toggle the visability of additional search fields and the disclosure triangle's state
  $('.advanced_search_disclosure_wrapper h4').click(function() {   $("div:contains('advanced_search_disclosure_wrapper')").toggleClass("advanced_search_disclosure_wrapper_active");
  $('#advanced_search_wrapper').toggle('fast', function(){
    });
  });
-# Javascript to update value of student capacity text box from slider
:javascript
  $(document).ready(function(){
    $( "#slider-range" ).slider({
      range: true,
      min: 0,
      max: 500,
      values: [ '#{@search.student_capacity_greater_than_or_equal_to}', '#{@search.student_capacity_less_than_or_equal_to}' ],
      slide: function( event, ui ) {
        $( "#my_min" ).val(ui.values[ 0 ]); // Display and selected the min Price
        $( "#my_max" ).val(ui.values[ 1 ]); // Display and selected the max Price
      }
    });
  });