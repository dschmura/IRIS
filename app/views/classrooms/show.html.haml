
.row-fluid.classroom_top
  .span2
    = render :partial => 'building_float'
  .tab-content
    .tab-pane#picture.active
      //<div style="min-height:300px;  height: 300px;">
      -#=image_tag("/images/user_interface_elements/300pxshim.gif")
      -#= image_tag @classroom.location.picture.url(:show).to_s, :alt => @classroom_alt
      //</div>
      %div{ :style => %(background:url("#{@classroom.location.picture.url(:show).to_s}") no-repeat center; min-height: 300px;) }

      -#= image_tag @classroom.location.picture.url(:show).to_s, :alt => @classroom_alt

    .tab-pane#pano
      %h4#missing_pano
        %i.icon-spinner.icon-spin
        Attempting to load panorama
        
    .tab-pane#map
      <div id="map_canvas" > </div>

    .tab-pane#contactme
      = render :partial => 'contact_sheet'
.tabbable#classroomTabs
  %ul.nav.nav-tabs#myTab
    %li.active
      %a{"data-toggle" => 'tab', :href => '#picture', :id => "#picturetab"}
        Picture
    %li
      %a{"data-toggle" => 'tab', :href => '#pano', :id => "#panotab"}
        Panorama
    %li
      %a{"data-toggle" => 'tab', :href => '#map', :id => "#maptab"}
        Map
    %li
      %a{"data-toggle" => 'tab', :href => '#contactme', :id => "#contacttab"}
        Contact

#room_number
  %h1
    = @classroom.location.name

-if technician_required
  %br
  %br
  %br
  .row
    .span10.offset1
      .well.well-small
        #technician_required
          = technician_required
      %br
-else
  %br
  %br

.row-fluid
  #attributes
    .span5.offset1

      %h3 Room Design

      %hr
      %i.icon-group
      %b
      %a{"data-original-title" => "Number of stations with a corresponding writing or lab surface assigned to students for instruction.  In computer labs, this includes only seats with assigned computers. Excludes instructor station and other seating types without writing surfaces.", "data-placement" => "right", :href => "#", :rel => "tooltip"} Student Capacity:
      = @classroom.student_capacity
      %br

      %i.icon-lightbulb
      %a{"data-original-title" => "Room is either windowless or can be darkened with the use of specialized blinds for the purpose of film viewing, high resolution image viewing, etc.", "data-placement" => "right", :href => "#", :rel => "tooltip", :class => attribute_true?(@classroom.light_control) } Light Control:

      - if @classroom.light_control
        .icon-ok

      %br
      %hr

      %i#attribute_classroom_layout
      %b Layout:
      %br

      %ul
        %ul
          %li

          %a{"data-original-title" => "Room provides a raised platform for the instructor.", "data-placement" => "right", :href => "#", :rel => "tooltip", :class => attribute_true?(@classroom.layout_platform) }
            Layout Platform
            - if @classroom.layout_platform
              .icon-ok

          %li
          %a{"data-original-title" => "Room contains a stage in the front of the room.", "data-placement" => "right", :href => "#", :rel => "tooltip", :class => attribute_true?(@classroom.layout_stage) }
            Layout Stage
            - if @classroom.layout_stage
              .icon-ok

          %li
          %a{"data-original-title" => "Room contains a stage in the front of the room.", "data-placement" => "right", :href => "#", :rel => "tooltip", :class => attribute_true?(@classroom.layout_tiered) } Layout Tiered
          - if @classroom.layout_tiered
            .icon-ok

      %hr
      %i#attribute_seating
      %b Seating:
      %ul
        %ul
          %li
            %a{"data-original-title" => "Room contains fixed chairs with tablet writing surface.", "data-placement" => "right", :href => "#", :rel => "tooltip", :class => attribute_true?(@classroom.seating_auditorium) }Seating Auditorium
            - if @classroom.seating_auditorium
              .icon-ok
          %li
            %a{"data-original-title" => "Room contains fixed chairs with no tablet.", "data-placement" => "right", :href => "#", :rel => "tooltip", :class => attribute_true?(@classroom.seating_chairs_fixed) }Seating Chairs Fixed
            - if @classroom.seating_chairs_fixed
              .icon-ok
          %li
            %a{"data-original-title" => "Room contains movable chairs with tablet writing surface.", "data-placement" => "right", :href => "#", :rel => "tooltip", :class => attribute_true?(@classroom.seating_movable_tables_chairs) }Seating Moveable Tablet Chairs
            - if @classroom.seating_movable_tables_chairs
              .icon-ok
          %li
            %a{"data-original-title" => "Room is set up in a seminar/conference style with seats surrounding large table.", "data-placement" => "right", :href => "#", :rel => "tooltip", :class => attribute_true?(@classroom.seating_table_conference) }Seating Table Conference
            - if @classroom.seating_table_conference
              .icon-ok
          %li
            %a{"data-original-title" => "Room contains a table writing surface for students (fixed, movable, or seminar/conference).", "data-placement" => "right", :href => "#", :rel => "tooltip", :class => attribute_true?(@classroom.seating_tables_any) }Seating Tables Any
            - if @classroom.seating_tables_any
              .icon-ok
          %li
            %a{"data-original-title" => "Room contains fixed table writing surface for students.", "data-placement" => "right", :href => "#", :rel => "tooltip", :class => attribute_true?(@classroom.seating_tables_fixed) }Seating Tables Fixed
            - if @classroom.seating_tables_fixed
              .icon-ok
          %li
            %a{"data-original-title" => "Room has moveable table writing surface for students. Rooms w/ moveable tables should be considered fixed if: school/dept prohibits changing arrangement, tables are wired or attached so moving is not easy, or room does not allow for other arrangements.", "data-placement" => "right", :href => "#", :rel => "tooltip", :class => attribute_true?(@classroom.seating_tables_moveable) }Seating Tables Moveable
            - if @classroom.seating_tables_moveable
              .icon-ok

      %hr
      %i.icon-bullhorn
      %b
      %a{"data-original-title" => "Room contains a sound system to amplify any of its A/V and IT components, such as computer or DVD/VCR.", "data-placement" => "right", :href => "#", :rel => "tooltip", :class => attribute_true?(@classroom.sound_amplification) }Sound Amplification
      - if @classroom.sound_amplification
        .icon-ok

      %br
      %i.icon-rss
      %b
      %a{"data-original-title" => "Room provides a hardwired ethernet connection to a portion of student seats.", "data-placement" => "right", :href => "#", :rel => "tooltip", :class => attribute_true?(@classroom.ethernet_students) }Ethernet Students
      - if @classroom.ethernet_students
        .icon-ok

      %br
      %i.icon-bolt
      %b
      %a{"data-original-title" => "Room contains power outlets for a portion of student seats.", "data-placement" => "right", :href => "#", :rel => "tooltip", :class => attribute_true?(@classroom.power_students) }Power Students
      - if @classroom.power_students
        .icon-ok

      %hr
      %i.icon-picture
      %b Writing Surface:
      %ul
        %ul
          %li
            %a{"data-original-title" => "Room contains a chalkboard writing surface of any size.", "data-placement" => "right", :href => "#", :rel => "tooltip", :class => attribute_true?(@classroom.writing_surface_chalkboard_any) }Writing Surface Chalkboard Any
            - if @classroom.writing_surface_chalkboard_any
              .icon-ok
          %li
            %a{"data-original-title" => "Room contains a chalkboard writing surface of over 25 feet.", "data-placement" => "right", :href => "#", :rel => "tooltip", :class => attribute_true?(@classroom.writing_surface_chalkboard_25ft) }Writing Surface Chalkboard 25ft
            - if @classroom.writing_surface_chalkboard_25ft
              .icon-ok
          %li
            %a{"data-original-title" => "Room contains a whiteboard writing surface of any size.", "data-placement" => "right", :href => "#", :rel => "tooltip", :class => attribute_true?(@classroom.writing_surface_whiteboard_any) }Writing Surface Whiteboard Any
            - if @classroom.writing_surface_whiteboard_any
              .icon-ok
          %li
            %a{"data-original-title" => "Room contains a whiteboard writing surface of over 25 feet.", "data-placement" => "right", :href => "#", :rel => "tooltip", :class => attribute_true?(@classroom.writing_surface_whiteboard_25ft) }Writing Surface Whiteboard 25ft
            - if @classroom.writing_surface_whiteboard_25ft
              .icon-ok
      %hr
      %i.icon-desktop
      %b Computer Classroom:
      

      %ul
        %ul
          %li
            %a{"data-original-title" => "Room contains either PC or MAC computers at each student workstation.", "data-placement" => "right", :href => "#", :rel => "tooltip", :class => attribute_true?(@classroom.computer_classroom_any) }Computer Classroom Any
            - if @classroom.computer_classroom_any
              .icon-ok
          %li
            %i.icon-apple
            %a{"data-original-title" => "Room contains Mac computers at each student workstation.", "data-placement" => "right", :href => "#", :rel => "tooltip", :class => attribute_true?(@classroom.computer_classroom_mac) }Computer Classroom Mac
            - if @classroom.computer_classroom_mac
              .icon-ok
          %li
            %i.icon-windows
            %a{"data-original-title" => "Room contains PC computers at each student workstation.", "data-placement" => "right", :href => "#", :rel => "tooltip", :class => attribute_true?(@classroom.computer_classroom_windows) }Computer Classroom Windows
            - if @classroom.computer_classroom_windows
              .icon-ok

    .span5.offset1
      %h3 Equipment
      %hr

      %i#attribute_dvd
      %b DVD Player:

      %ul
        %ul
          %li
            %a{"data-original-title" => "Room contains DVD player.", "data-placement" => "right", :href => "#", :rel => "tooltip", :class => attribute_true?(@classroom.dvd_player_regular) }Standard
            - if @classroom.dvd_player_regular
              .icon-ok
          %li
            %a{"data-original-title" => "Room contains Blu-Ray Disc player.", "data-placement" => "right", :href => "#", :rel => "tooltip", :class => attribute_true?(@classroom.dvd_player_blueray) }Blu-Ray
            - if @classroom.dvd_player_blueray
              .icon-ok
      %hr

      %i#attribute_captioning_device
      %b
        %a{"data-original-title" => "Room contains a special device for transcribing audio into displayable captions.", "data-placement" => "right", :href => "#", :rel => "tooltip", :class => attribute_true?(@classroom.captioning_device) }Captioning Device
        - if @classroom.captioning_device
          .icon-ok

      %hr
      %i.icon-laptop
      
      %b Podium Computer:
      %ul
        %ul

          %li
            %i.icon-apple
            %a{"data-original-title" => "Room contains a Mac computer for use by the instructor.", "data-placement" => "right", :href => "#", :rel => "tooltip", :class => attribute_true?(@classroom.podium_computer_mac) }Podium Classroom Mac
            - if @classroom.podium_computer_mac
              .icon-ok
              
          %li
            %i.icon-windows
            %a{"data-original-title" => "Room contains a PC computer for use by the instructor.", "data-placement" => "right", :href => "#", :rel => "tooltip", :class => attribute_true?(@classroom.podium_computer_windows) }Podium Classroom Windows
            - if @classroom.podium_computer_windows
              .icon-ok

      %hr
      %i#attribute_doc_camera
      %b
        %a{"data-original-title" => "Room contains a specialized camera for the real-time displaying of documents, texts, or small objects.", "data-placement" => "right", :href => "#", :rel => "tooltip", :class => attribute_true?(@classroom.document_camera) }Document Camera
        - if @classroom.document_camera
          .icon-ok
      %br
      %i.icon-edit
      %b
        %a{"data-original-title" => "Room contains special digitial pen and writing surface for commenting/editing digital presentation.", "data-placement" => "right", :href => "#", :rel => "tooltip", :class => attribute_true?(@classroom.interactive_pen) }Interactive Pen
        - if @classroom.interactive_pen
          .icon-ok
      %br
      %i#attribute_lecture_capture
      %b
        %a{"data-original-title" => "Room contains a lecture capture device to record instructor, digital presentation, or audio/voice. Must record voice at a minimum.", "data-placement" => "right", :href => "#", :rel => "tooltip", :class => attribute_true?(@classroom.lecture_capture) }Lecture Capture
        - if @classroom.lecture_capture
          .icon-ok
      %br
      %i.icon-phone
      %b
        %a{"data-original-title" => "Room contains a telephone.", "data-placement" => "right", :href => "#", :rel => "tooltip", :class => attribute_true?(@classroom.telephone) } Telephone
        - if @classroom.telephone
          .icon-ok
      %br
      %i#attribute_video_conferencing
      %b
        %a{"data-original-title" => "Room contains a special video conferencing equipment, including camera.", "data-placement" => "right", :href => "#", :rel => "tooltip", :class => attribute_true?(@classroom.video_conferencing) }Video Conferencing
        - if @classroom.video_conferencing
          .icon-ok
      %br

      %hr
      %i#attribute_projecters
      %b Projection:
      %ul
        %ul
          -#.icon-film
          %li
            %a{"data-original-title" => "Room contains 16mm film projector.", "data-placement" => "right", :href => "#", :rel => "tooltip", :class => attribute_true?(@classroom.projection_16mm_film) }Projection 16mm Film
              
            - if @classroom.projection_16mm_film
              .icon-ok
          %li
            %a{"data-original-title" => "Room contains 35mm film projector.", "data-placement" => "right", :href => "#", :rel => "tooltip", :class => attribute_true?(@classroom.projection_35mm_file) }Projection 35mm Film
            - if @classroom.projection_35mm_file
              .icon-ok
          %li
            %a{"data-original-title" => "Room contains projector or monitor to digitally display video from any of the room A/V and IT components, such as computer or DVD/VCR.", "data-placement" => "right", :href => "#", :rel => "tooltip", :class => attribute_true?(@classroom.projection_digital_data_video) }Projection Digital Data Video
            - if @classroom.projection_digital_data_video
              .icon-ok
          %li
            %a{"data-original-title" => "Room contains a traditional slide projector for the display of photographic slides.", "data-placement" => "right", :href => "#", :rel => "tooltip", :class => attribute_true?(@classroom.projection_traditional_slide) }Projection Traditional Slide
            - if @classroom.projection_traditional_slide
              .icon-ok
      %hr
      %h4 Accessibility

      Adaptive technologies are provided by request. Please contact the Office of Services for Students with Disabilities to provide adaptive technologies to your classroom. Phone 763-3000 or email <a href="mailto:ssdoffice@umich.edu" target="_blank">ssdoffice@umich.edu</a>

      %br
      %br
      %h4 Notes
      = @classroom.notes

      %hr
      #last_updated
        Updated:
        = @classroom.updated_at.strftime "%I:%M %p %Y-%m-%d "



:javascript

    $('#myTab').click(function(e) {
      if (e.target.id == "#picturetab"){
        $("#missing_pano").replaceWith("");
      }
      else if (e.target.id == "#panotab") {
        //check if html5 version or panorama exists.
        $.ajax({
          url:'/system/videos/panoramas/#{@classroom.facility_code_heprod.upcase}_QTVR_OUT.xml',
          type:'HEAD',
          error:
            function(){
              $("#pano").insertAfter("<div id='missing_pano'><h4>Attempting to load panorama</h4></div>")
              },
          success:
            function(){
              
              if (swfobject.hasFlashPlayerVersion("9.0.0")) {
          			var flashvars = {};
          			var params = {};
          			params.quality = "high";
          			params.bgcolor = "#ffffff";
          			params.allowscriptaccess = "sameDomain";
          			params.allowfullscreen = "true";
          			params.wmode = "transparent";
          			var attributes = {};
          			attributes.id = "pano";
          			attributes.name = "pano";
          			attributes.align = "middle";
          			
          			flashvars.panoxml="/system/videos/panoramas/#{@classroom.facility_code_heprod.upcase}_QTVR_OUT.xml";
          			params.base=".";
          			swfobject.embedSWF(
          				"/system/videos/panoramas/pano2vr_player.swf", "missing_pano", 
          				"1200", "500",
          				"9.0.0", "", 
          				flashvars, params, attributes);

          		} else 
          		// check for CSS3 3D transformations and WebGL
          		if (ggHasHtml5Css3D() || ggHasWebGL()) {

          			// create the panorama player with the container
          			pano=new pano2vrPlayer("pano");
          			pano.readConfigUrl("/system/videos/panoramas/#{@classroom.facility_code_heprod.upcase}_QTVR_OUT.xml");
          			// hide the URL bar on the iPhone
          			hideUrlBar();
          		}
              
              
                else{
                  $("#missing_pano").replaceWith("<object CLASSID=\"clsid:02BF25D5-8C17-4B23-BC80-D3488ABDDC6B\" width=\"900\" height=\"260\" class=\"legacy_panorama\" CODEBASE=\"http://www.apple.com/qtactivex/qtplugin.cab\" class=\"legacy_panorama\"> <param name=\"src\" value=\"/system/videos/panoramas/#{@classroom.facility_code_heprod.upcase}_QTVR.mov\"><param name=\"target\" value=\"myself\" /><param name=\"controller\" value=\"false\"><param name=\"scale\" value=\"tofit\"><param name=\"kioskmode\" value=\"true\"> <embed src=\"/system/videos/panoramas/#{@classroom.facility_code_heprod.upcase}_QTVR.mov\" width=\"900\" height=\"260\" scale=\"tofit\" target=\"myself\"  kioskmode=\"true\" loop=\"false\" controller=\"false\" pluginspage=\"http://www.apple.com/quicktime/\"></embed></object>");
     
                  }
                }
          });
          }
      else if (e.target.id == "#maptab")
      {
        $("#pano").replaceWith("");
        $('#map').height("300px").width("100%").gmap3({
        
          map:{
            
            options:{
              center:[#{@classroom.location.latitude.to_s},#{@classroom.location.longitude.to_s}],
              zoom:16,
              mapTypeId: google.maps.MapTypeId.ROADMAP,
              mapTypeControl: false,
              mapTypeControlOptions: {
                style: google.maps.MapTypeControlStyle.HORIZONTAL_BAR
                },
              navigationControl: true,
              scrollwheel: true,
              streetViewControl: true,
              panControl: false,
              panControlOptions: {
                  position: google.maps.ControlPosition.BOTTOM_LEFT
              },
            },
          },

           infowindow:{
                latLng:[#{@classroom.location.latitude.to_s},#{@classroom.location.longitude.to_s}],
                options:{
                  content:'<div style=""><span>#{link_to image_tag(@building_image, :class => "round", :style => "max-width: 100px; float: left; margin-right: 1em;"), "../classrooms?utf8=✓&search%5Blocation_id_equals%5D=#{@building.id}"} </span> <span style="float: right;  font-size: 11px;  line-height: 1.2em;"><b>#{@building.name}<br /> #{@building.locatable.address}<br /> #{link_to "All Classrooms",  "../classrooms?utf8=✓&search%5Blocation_id_equals%5D=#{@building.id}"}<br /> #{link_to "Floor Map",  basement}</span> </div> '
                  }
                }
        });
          }
        else if (e.target.id == "#contacttab"){
        $("#missing_pano").replaceWith("");
        }
    });








